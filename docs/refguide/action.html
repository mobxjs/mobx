<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>action · MobX</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# action"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="action · MobX"/><meta property="og:type" content="website"/><meta property="og:url" content="https://mobx.js.org//"/><meta property="og:description" content="# action"/><meta property="og:image" content="https://mobx.js.org/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://mobx.js.org/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-65632006-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://codefund.app/properties/259/funder.js" async=""></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/mobx.png" alt="MobX"/><h2 class="headerTitleWithLogo">MobX</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/intro/concepts" target="_self">Documentation</a></li><li class=""><a href="https://github.com/mobxjs/mobx" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Changing observables</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/README">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/intro/concepts">Concepts &amp; Principles</a></li><li class="navListItem"><a class="navItem" href="/docs/intro/overview">The gist of MobX</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/api">API overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Making things observable</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/refguide/observable">observable</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/observable-decorator">@observable</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/object">objects</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/array">arrays</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/map">maps</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/boxed">boxed values</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/modifiers">decorators</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Reacting to observables</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/refguide/computed-decorator">(@)computed</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/autorun">autorun</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/when">when</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/reaction">reaction</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/observer-component">(@)observer</a></li><li class="navListItem"><a class="navItem" href="/docs/best/react">Understanding what MobX reacts to</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Changing observables</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/docs/refguide/action">action</a></li><li class="navListItem"><a class="navItem" href="/docs/best/actions">async actions &amp; flows</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/object-api">Object api</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Utility functions</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/refguide/tojson">toJS</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/extend-observable">extendObservable</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/extending">createAtom</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/observe">intercept &amp; observe</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/create-transformer">mobxUtils.createTransformer</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/expr">mobxUtils.expr</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/mobx-utils">MobX-utils</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tips &amp; Tricks</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/faq/faq">Frequently Asked Questions</a></li><li class="navListItem"><a class="navItem" href="/docs/best/pitfalls">Common Pitfalls &amp; Best Practices</a></li><li class="navListItem"><a class="navItem" href="/docs/best/decorators">How to (not) use decorator syntax</a></li><li class="navListItem"><a class="navItem" href="/docs/best/trace">Using trace for debugging</a></li><li class="navListItem"><a class="navItem" href="/docs/best/store">Defining data stores</a></li><li class="navListItem"><a class="navItem" href="/docs/best/react-performance">Optimizing React components</a></li><li class="navListItem"><a class="navItem" href="/docs/refguide/spy">spy</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/mobxjs/mobx/edit/master/docs/refguide/action.md" target="_blank" rel="noreferrer noopener">Edit</a></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="action"></a><a href="#action" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>action</h1>
<div id='codefund' ></div>
<p><details>
<summary style="color: white; background:green;padding:5px;margin:5px;border-radius:2px">egghead.io lesson 5: actions</summary>
<br>
<div style="padding:5px;">
<iframe style="border: none;" width=760 height=427  src="https://egghead.io/lessons/react-use-mobx-actions-to-change-and-guard-state/embed" ></iframe>
</div>
<a style="font-style:italic;padding:5px;margin:5px;"  href="https://egghead.io/lessons/react-use-mobx-actions-to-change-and-guard-state">Hosted on egghead.io</a>
</details></p>
<p>Usage:</p>
<ul>
<li><code>action(fn)</code></li>
<li><code>action(name, fn)</code></li>
<li><code>@action classMethod() {}</code></li>
<li><code>@action(name) classMethod () {}</code></li>
<li><code>@action boundClassMethod = (args) =&gt; { body }</code></li>
<li><code>@action(name) boundClassMethod = (args) =&gt; { body }</code></li>
<li><code>@action.bound classMethod() {}</code></li>
</ul>
<p>Any application has actions. Actions are anything that modify the state.
With MobX you can make it explicit in your code where your actions live by marking them.
Actions help you to structure your code better.</p>
<p>It takes a function and returns a function with the same signature, but wrapped with <code>transaction</code>, <code>untracked</code>, and <code>allowStateChanges</code>.
Especially the fact that <code>transaction</code> is applied automatically yields great performance benefits;
actions will batch mutations and only notify computed values and reactions after the (outer most) action has finished.
This makes sure intermediate or incomplete values produced during an action are not visible to the rest of the application until the action has finished.</p>
<p>It is advised to use <code>(@)action</code> on any function that modifies observables or has side effects.
<code>action</code> also provides useful debugging information in combination with the devtools.</p>
<p>Using the <code>@action</code> decorator with setters (i.e. <code>@action set propertyName</code>) is not supported; however, setters of <a href="https://github.com/mobxjs/mobx/blob/gh-pages/docs/refguide/computed-decorator.md#setters-for-computed-values">computed properties are automatically actions</a>.</p>
<p>Note: using <code>action</code> is mandatory when MobX is configured to require actions to make state changes, see <a href="https://github.com/mobxjs/mobx/blob/gh-pages/docs/refguide/api.md#configure"><code>enforceActions</code></a>.</p>
<h2><a class="anchor" aria-hidden="true" id="when-to-use-actions"></a><a href="#when-to-use-actions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>When to use actions?</h2>
<p>Actions should only, and always, be used on functions that <em>modify</em> state.
Functions that just perform look-ups, filters etc should <em>not</em> be marked as actions; to allow MobX to track their invocations.</p>
<p><a href="https://github.com/mobxjs/mobx/blob/gh-pages/docs/refguide/api.md#configure">&quot;enforce actions&quot;</a> enforces that all state modifications are done by an action. This is a useful best practice in larger, long term code bases.</p>
<h2><a class="anchor" aria-hidden="true" id="bound-actions"></a><a href="#bound-actions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bound actions</h2>
<p>The <code>action</code> decorator / function follows the normal rules for binding in javascript.
However, <code>action.bound</code> can be used to automatically bind actions to the targeted object.
Note that unlike <code>action</code>, <code>(@)action.bound</code> does not take a name parameter, so the name will always be based on the property name to which the action is bound.</p>
<p>Example:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ticker</span> </span>{
    @observable tick = <span class="hljs-number">0</span>

    @action.bound
    increment() {
        <span class="hljs-keyword">this</span>.tick++ <span class="hljs-comment">// 'this' will always be correct</span>
    }
}

<span class="hljs-keyword">const</span> ticker = <span class="hljs-keyword">new</span> Ticker()
setInterval(ticker.increment, <span class="hljs-number">1000</span>)
</code></pre>
<p><em>Note: don't use <em>action.bound</em> with arrow functions; arrow functions are already bound and cannot be rebound.</em></p>
<h2><a class="anchor" aria-hidden="true" id="runinactionname-thunk"></a><a href="#runinactionname-thunk" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>runInAction(name?, thunk)</code></h2>
<p><code>runInAction</code> is a simple utility that takes an code block and executes in an (anonymous) action. This is useful to create and execute actions on the fly, for example inside an asynchronous process. <code>runInAction(f)</code> is sugar for <code>action(f)()</code></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/best/react"><span class="arrow-prev">← </span><span class="function-name-prevnext">Understanding what MobX reacts to</span></a><a class="docs-next button" href="/docs/best/actions"><span>async actions &amp; flows</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#when-to-use-actions">When to use actions?</a></li><li><a href="#bound-actions">Bound actions</a></li><li><a href="#runinactionname-thunk"><code>runInAction(name?, thunk)</code></a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/mobx.png" alt="MobX" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/README">Why MobX</a><a href="/docs/en/intro/concepts">Concepts</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/mobx" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://gitter.im/mobxjs/mobx">Project Chat</a></div><div><h5>More</h5><a class="github-button" href="https://github.com/mobxjs/mobx" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div></body></html>